/* global Chart */
'use strict';
var chart; 
var chart_x = [
  0,1,2,3,4,5,6,7,8,9,
  10,11,12,13,14,15,16,17,18,19,
  20,21,22,23,24,25,26,27,28,29,
  30,31,32,33,34,35,36,37,38,39,
  40,41,42,43,44,45,46,47,48,49,
  50,51,52,53,54,55,56,57,58,59,
  60,61,62,63,64,65,66,67,68,69,
  70,71,72,73,74,75,76,77,78,79,
  80,81,82,83,84,85,86,87,88,89,
  90,91,92,93,94,95,96,97,98,99,
  100,101,102,103,104,105,106,107,108,109,
  110,111,112,113,114,115,116,117,118,119,
  120,121,122,123,124,125,126,127,128,129,
  130,131,132,133,134,135,136,137,138,139,
  140,141,142,143,144,145,146,147,148,149,
  150,151,152,153,154,155,156,157,158,159,
  160,161,162,163,164,165,166,167,168,169,
  170,171,172,173,174,175,176,177,178,179,
  180,181,182,183,184,185,186,187,188,189,
  190,191,192,193,194,195,196,197,198,199,
  200,201,202,203,204,205,206,207,208,209,
  210,211,212,213,214,215,216,217,218,219,
  220,221,222,223,224,225,226,227,228,229,
  230,231,232,233,234,235,236,237,238,239,
  240,241,242,243,244,245,246,247,248,249,
  250,251,252,253,254,255,256,257,258,259,
  260,261,262,263,264,265,266,267,268,269,
  270,271,272,273,274,275,276,277,278,279,
  280,281,282,283,284,285,286,287,288,289,
  290,291,292,293,294,295,296,297,298,299,
  300,301,302,303,304,305,306,307,308,309,
  310,311,312,313,314,315,316,317,318,319,
  320,321,322,323,324,325,326,327,328,329,
  330,331,332,333,334,335,336,337,338,339,
  340,341,342,343,344,345,346,347,348,349,
  350,351,352,353,354,355,356,357,358,359,
  360,361,362,363,364,365,366,367,368,369,
  370,371,372,373,374,375,376,377,378,379,
  380,381,382,383,384,385,386,387,388,389,
  390,391,392,393,394,395,396,397,398,399,
  400,401,402,403,404,405,406,407,408,409,
  410,411,412,413,414,415,416,417,418,419,
  420,421,422,423,424,425,426,427,428,429,
  430,431,432,433,434,435,436,437,438,439,
  440,441,442,443,444,445,446,447,448,449,
  450,451,452,453,454,455,456,457,458,459,
  460,461,462,463,464,465,466,467,468,469,
  470,471,472,473,474,475,476,477,478,479,
  480,481,482,483,484,485,486,487,488,489,
  490,491,492,493,494,495,496,497,498,499,
  500,501,502,503,504,505,506,507,508,509,
  510,511,512
];

var chart_y = [
  0.000,0.012,0.025,0.037,0.049,0.061,0.074,0.086,0.098,0.110,
  0.122,0.135,0.147,0.159,0.171,0.183,0.195,0.207,0.219,0.231,
  0.243,0.255,0.267,0.279,0.290,0.302,0.314,0.325,0.337,0.348,
  0.360,0.371,0.383,0.394,0.405,0.416,0.428,0.439,0.450,0.461,
  0.471,0.482,0.493,0.504,0.514,0.525,0.535,0.545,0.556,0.566,
  0.576,0.586,0.596,0.606,0.615,0.625,0.634,0.644,0.653,0.662,
  0.672,0.681,0.690,0.698,0.707,0.716,0.724,0.733,0.741,0.749,
  0.757,0.765,0.773,0.781,0.788,0.796,0.803,0.810,0.818,0.825,
  0.831,0.838,0.845,0.851,0.858,0.864,0.870,0.876,0.882,0.888,
  0.893,0.899,0.904,0.909,0.914,0.919,0.924,0.929,0.933,0.937,
  0.942,0.946,0.950,0.953,0.957,0.960,0.964,0.967,0.970,0.973,
  0.976,0.978,0.981,0.983,0.985,0.987,0.989,0.991,0.992,0.994,
  0.995,0.996,0.997,0.998,0.999,0.999,1.000,1.000,1.000,1.000,
  1.000,0.999,0.999,0.998,0.997,0.996,0.995,0.994,0.992,0.991,
  0.989,0.987,0.985,0.983,0.981,0.978,0.976,0.973,0.970,0.967,
  0.964,0.960,0.957,0.953,0.950,0.946,0.942,0.937,0.933,0.929,
  0.924,0.919,0.914,0.909,0.904,0.899,0.893,0.888,0.882,0.876,
  0.870,0.864,0.858,0.851,0.845,0.838,0.831,0.825,0.818,0.810,
  0.803,0.796,0.788,0.781,0.773,0.765,0.757,0.749,0.741,0.733,
  0.724,0.716,0.707,0.698,0.690,0.681,0.672,0.662,0.653,0.644,
  0.634,0.625,0.615,0.606,0.596,0.586,0.576,0.566,0.556,0.545,
  0.535,0.525,0.514,0.504,0.493,0.482,0.471,0.461,0.450,0.439,
  0.428,0.416,0.405,0.394,0.383,0.371,0.360,0.348,0.337,0.325,
  0.314,0.302,0.290,0.279,0.267,0.255,0.243,0.231,0.219,0.207,
  0.195,0.183,0.171,0.159,0.147,0.135,0.122,0.110,0.098,0.086,
  0.074,0.061,0.049,0.037,0.025,0.012,0.000,-0.012,-0.025,-0.037,
  -0.049,-0.061,-0.074,-0.086,-0.098,-0.110,-0.122,-0.135,-0.147,-0.159,
  -0.171,-0.183,-0.195,-0.207,-0.219,-0.231,-0.243,-0.255,-0.267,-0.279,
  -0.290,-0.302,-0.314,-0.325,-0.337,-0.348,-0.360,-0.371,-0.383,-0.394,
  -0.405,-0.416,-0.428,-0.439,-0.450,-0.461,-0.471,-0.482,-0.493,-0.504,
  -0.514,-0.525,-0.535,-0.545,-0.556,-0.566,-0.576,-0.586,-0.596,-0.606,
  -0.615,-0.625,-0.634,-0.644,-0.653,-0.662,-0.672,-0.681,-0.690,-0.698,
  -0.707,-0.716,-0.724,-0.733,-0.741,-0.749,-0.757,-0.765,-0.773,-0.781,
  -0.788,-0.796,-0.803,-0.810,-0.818,-0.825,-0.831,-0.838,-0.845,-0.851,
  -0.858,-0.864,-0.870,-0.876,-0.882,-0.888,-0.893,-0.899,-0.904,-0.909,
  -0.914,-0.919,-0.924,-0.929,-0.933,-0.937,-0.942,-0.946,-0.950,-0.953,
  -0.957,-0.960,-0.964,-0.967,-0.970,-0.973,-0.976,-0.978,-0.981,-0.983,
  -0.985,-0.987,-0.989,-0.991,-0.992,-0.994,-0.995,-0.996,-0.997,-0.998,
  -0.999,-0.999,-1.000,-1.000,-1.000,-1.000,-1.000,-0.999,-0.999,-0.998,
  -0.997,-0.996,-0.995,-0.994,-0.992,-0.991,-0.989,-0.987,-0.985,-0.983,
  -0.981,-0.978,-0.976,-0.973,-0.970,-0.967,-0.964,-0.960,-0.957,-0.953,
  -0.950,-0.946,-0.942,-0.937,-0.933,-0.929,-0.924,-0.919,-0.914,-0.909,
  -0.904,-0.899,-0.893,-0.888,-0.882,-0.876,-0.870,-0.864,-0.858,-0.851,
  -0.845,-0.838,-0.831,-0.825,-0.818,-0.810,-0.803,-0.796,-0.788,-0.781,
  -0.773,-0.765,-0.757,-0.749,-0.741,-0.733,-0.724,-0.716,-0.707,-0.698,
  -0.690,-0.681,-0.672,-0.662,-0.653,-0.644,-0.634,-0.625,-0.615,-0.606,
  -0.596,-0.586,-0.576,-0.566,-0.556,-0.545,-0.535,-0.525,-0.514,-0.504,
  -0.493,-0.482,-0.471,-0.461,-0.450,-0.439,-0.428,-0.416,-0.405,-0.394,
  -0.383,-0.371,-0.360,-0.348,-0.337,-0.325,-0.314,-0.302,-0.290,-0.279,
  -0.267,-0.255,-0.243,-0.231,-0.219,-0.207,-0.195,-0.183,-0.171,-0.159,
  -0.147,-0.135,-0.122,-0.110,-0.098,-0.086,-0.074,-0.061,-0.049,-0.037,
  -0.025,-0.012,0.000
];

$(function() {
  var chart_opts = {
    type: 'line',
    data: {
      labels: chart_x,
      datasets: [{
        data: chart_y
      }]
    },
    options: {
      legend: {
        display: false
      },
      scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true,
            min: -1.2,
            max: 1.2,
          }
        }],
        xAxes: [{
          ticks: {
            callback: function(value) {return ((value % 10) == 0)? value : '';},
          }
        }]
      },
      cursor: {
        enabled: true,
        display: true
      }
    }
  };
  chart = new Chart($('#stage'), chart_opts);
  chart.render();
});

$('#readButton').on('click', function () {
  let p = chart.cursor.getSelectedValue();
  $('#value').html('{ left=' + p.left + ', right=' + p.right + ' }');  
});